<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Zyron</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
<script src="/ixlmath/baremux/index.js"></script>
<script src="/ixlmath/scram/scramjet.all.js"></script>
<script>navigator.serviceWorker.register("/ixlmath/sw.js")</script>
<style>
    :root {
        --bg: #0a0a0c;
        --nav: rgba(20, 20, 23, 0.9);
        --t-on: #1a1a1e;
        --t-off: transparent;
        --purp: #a855f7;
        --glow: rgba(168, 85, 247, 0.4);
        --txt: #f8fafc;
        --muted: #94a3b8;
        --in: #111114;
        --line: #27272a;
        --hvr: #1e1e22;
    }

    body, html {
        margin: 0; padding: 0; height: 100%;
        font-family: 'Inter', sans-serif;
        background: var(--bg); overflow: hidden; color: var(--txt);
    }

    /* loading stuff */
    #loading-screen {
        position: fixed; inset: 0; background: var(--bg);
        display: flex; flex-direction: column; align-items: center; justify-content: center;
        z-index: 99999; transition: 0.5s;
    }
    .black-hole { 
        height: 100px; width: 100px; background: #000; border-radius: 50%; 
        box-shadow: 0 0 40px 10px var(--purp), inset 0 0 10px #ffffff88; 
        animation: pulse 3s infinite ease-in-out;
    }
    @keyframes pulse { 
        0%, 100% { transform: scale(1); box-shadow: 0 0 40px 10px var(--purp); }
        50% { transform: scale(1.05); box-shadow: 0 0 60px 20px var(--purp); } 
    }

    #top-ui { transition: 0.4s cubic-bezier(0.4, 0, 0.2, 1); }
    body.nav-hidden #top-ui { transform: translateY(-108px); }
    body.nav-hidden .frame-container { top: 0 !important; }

    /* tabs */
    .tab-strip { display: flex; align-items: flex-end; padding: 12px 15px 0 15px; gap: 4px; height: 40px; background: var(--bg); }
    .tab { 
        background: var(--t-off); padding: 8px 12px; border-radius: 10px 10px 0 0; 
        font-size: 13px; min-width: 140px; max-width: 200px; color: var(--muted); 
        border: 1px solid transparent; border-bottom: none; transition: 0.2s; 
        position: relative; display: flex; align-items: center; gap: 8px; cursor: pointer;
    }
    .tab.active { background: var(--t-on); color: var(--txt); border-color: var(--line); }
    .tab.active::after { content: ''; position: absolute; bottom: 0; left: 0; right: 0; height: 2px; background: var(--purp); box-shadow: 0 -2px 10px var(--purp); }
    
    .close-btn { background: none; border: none; color: inherit; font-size: 16px; cursor: pointer; opacity: 0.5; }
    .close-btn:hover { color: #ff605c; opacity: 1; }

    .navbar { display: flex; align-items: center; height: 56px; background: var(--nav); padding: 0 20px; gap: 16px; border-bottom: 1px solid var(--line); backdrop-filter: blur(12px); }
    .nav-btn { 
        cursor: pointer; width: 34px; height: 34px; border-radius: 8px;
        display: flex; align-items: center; justify-content: center;
        transition: 0.2s; color: var(--muted);
    }
    .nav-btn:hover { background: var(--hvr); color: var(--purp); }
    
    .set-icon { width: 20px; height: 20px; object-fit: contain; opacity: 0.7; }
    .nav-btn:hover .set-icon { opacity: 1; filter: drop-shadow(0 0 5px var(--purp)); }

    .search-box { flex: 1; display: flex; align-items: center; background: var(--in); border-radius: 12px; padding: 0 16px; border: 1px solid var(--line); height: 38px; }
    .search-box:focus-within { border-color: var(--purp); box-shadow: 0 0 0 3px var(--glow); }
    #bar { width: 100%; background: transparent; border: none; color: #fff; outline: none; font-size: 14px; }

    .frame-container { position: absolute; top: 108px; inset: 0; background: #000; transition: 0.4s; }
    iframe { width: 100%; height: 100%; border: none; display: none; }
    iframe.active { display: block; }

    .home { position: absolute; inset: 0; display: flex; align-items: center; justify-content: center; background: radial-gradient(circle, #1a1a2e 0%, var(--bg) 100%); z-index: 5; flex-direction: column; }
    .home h1 { font-size: 48px; background: linear-gradient(#fff, #a855f7); -webkit-background-clip: text; -webkit-text-fill-color: transparent; margin: 0; }

    /* settings menu */
    .modal { position: fixed; inset: 0; background: rgba(0,0,0,0.8); display: none; align-items: center; justify-content: center; z-index: 100000; backdrop-filter: blur(4px); }
    .modal.open { display: flex; }
    .modal-inner { background: #1a1a1e; padding: 30px; border-radius: 16px; border: 1px solid var(--line); width: 380px; text-align: center; }
    
    .btn {
        width: 100%; padding: 12px; margin: 6px 0; border-radius: 10px; border: 1px solid var(--line);
        background: var(--hvr); color: var(--txt); font-weight: 500; cursor: pointer; font-size: 10px; text-transform: uppercase;
    }
    .btn:hover { border-color: var(--purp); color: var(--purp); }
    .btn.active-link { border-color: var(--purp); background: var(--glow); }
    .btn.main { background: var(--purp); border: none; font-size: 12px; padding: 14px; }

    .label { color: var(--muted); font-size: 10px; text-transform: uppercase; letter-spacing: 2px; margin: 15px 0 5px 0; display: block; }
    .load-bar { position: absolute; top: 0; left: 0; height: 3px; background: var(--purp); width: 0%; transition: 0.3s; z-index: 10001; }
</style>
</head>
<body>

    <div id="loading-screen"><div class="black-hole"></div></div>
    <div class="load-bar" id="l-bar"></div>

    <div id="top-ui">
        <div class="tab-strip" id="strip">
            <div class="nav-btn" onclick="makeTab()" style="font-size: 24px;">+</div>
        </div>

        <nav class="navbar">
            <div style="display: flex; gap: 8px;">
                <div class="nav-btn" onclick="back()">←</div>
                <div class="nav-btn" onclick="next()">→</div>
                <div class="nav-btn" onclick="refresh()">↻</div>
            </div>
            <div class="search-box">
                <input type="text" placeholder="Search Zyron or enter URL" id="bar">
            </div>
            <div style="display: flex; gap: 8px;">
                <div class="nav-btn" onclick="openSets()">
                    <img src="settingsicon.png" class="set-icon">
                </div>
                <div class="nav-btn" onclick="full()">⛶</div>
            </div>
        </nav>
    </div>

    <div class="frame-container" id="f-container">
        <div id="home-ui" class="home">
            <div style="text-align: center;">
                <h1>Zyron</h1>
                <p style="color: var(--muted); letter-spacing: 2px; font-size: 12px;">MADE BY ARCTIC 1.0</p>
            </div>
        </div>
    </div>

    <div class="modal" id="sets" onclick="closeSets()">
        <div class="modal-inner" onclick="event.stopPropagation()">
            <h2 style="color: var(--purp); letter-spacing: 2px; font-size: 18px; text-transform: uppercase;">Settings</h2>
            
            <span class="label">General</span>
            <button class="btn main" onclick="cloak()">Open in About:Blank</button>
            <button class="btn" onclick="hideNav()">Hide Navigation Bar</button>

            <span class="label">Wisp Servers</span>
            <button id="w-main" class="btn active-link" onclick="setWisp('main')">Main Server</button>
            <div style="display: flex; gap: 8px;">
                <button id="w-b2" class="btn" style="flex:1;" onclick="setWisp('backup2')">Backup 2</button>
                <button id="w-b3" class="btn" style="flex:1;" onclick="setWisp('backup3')">Backup 3</button>
            </div>

            <button class="btn" onclick="closeSets()" style="margin-top: 20px; border: none; background: transparent; opacity: 0.6;">Close</button>
        </div>
    </div>

<script>
    let tabs = [];
    let now = null;
    
    const urls = {
        main: "wss://zyrongardeningalore.speedinsure.hk/wisp/",
        backup2: "wss://wisp.rhw.one/",
        backup3: "wss://ixlmathlogin.ixl.best/wisp/"
    };
    
    let activeWisp = urls.main;
    const conn = new BareMux.BareMuxConnection("/ixlmath/baremux/worker.js");
    
    function start() {
        conn.setTransport("/ixlmath/libcurl/index.mjs", [{ websocket: activeWisp }]);
    }

    const { ScramjetController } = $scramjetLoadController();
    const scram = new ScramjetController({
        files: { all: "/ixlmath/scram/scramjet.all.js", wasm: "/ixlmath/scram/scramjet.wasm.wasm", sync: "/ixlmath/scram/scramjet.sync.js" },
        prefix: "/ixlmath/go/" 
    });
    
    start();
    scram.init();

    function setWisp(t) {
        activeWisp = urls[t];
        document.querySelectorAll('.active-link').forEach(b => b.classList.remove('active-link'));
        const idMap = { main: 'w-main', backup2: 'w-b2', backup3: 'w-b3' };
        document.getElementById(idMap[t]).classList.add('active-link');
        start();
    }

    function showL() { document.getElementById('loading-screen').style.display = 'flex'; document.getElementById('loading-screen').style.opacity = '1'; }
    function hideL() { document.getElementById('loading-screen').style.opacity = '0'; setTimeout(() => document.getElementById('loading-screen').style.display = 'none', 500); }

    function makeTab() {
        const id = Date.now() + Math.random();
        tabs.push({ id, url: '', title: 'New Tab' });
        const f = document.createElement('iframe');
        f.id = `f-${id}`;
        f.onload = () => { 
            const t = tabs.find(x => x.id === id); 
            if(t) { render(); hideL(); progress(100); }
        };
        document.getElementById('f-container').appendChild(f);
        switchTab(id);
    }

    function switchTab(id) {
        now = id;
        document.querySelectorAll('iframe').forEach(f => f.classList.remove('active'));
        const f = document.getElementById(`f-${id}`);
        if(f) f.classList.add('active');
        const t = tabs.find(x => x.id === id);
        document.getElementById('bar').value = t.url || '';
        document.getElementById('home-ui').style.display = f.src ? 'none' : 'flex';
        render();
    }

    function render() {
        const s = document.getElementById('strip');
        const add = s.querySelector('.nav-btn');
        s.querySelectorAll('.tab').forEach(t => t.remove());
        tabs.forEach(t => {
            const el = document.createElement('div');
            el.className = `tab ${t.id === now ? 'active' : ''}`;
            el.onclick = () => switchTab(t.id);
            el.innerHTML = `<span style="flex:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;">${t.title}</span>
                            <button class="close-btn" onclick="killTab(event, ${t.id})">×</button>`;
            s.insertBefore(el, add);
        });
    }

    function go() {
        const v = document.getElementById('bar').value.trim();
        if(!v) return;
        showL(); progress(70);
        let u = (v.includes('.') && !v.includes(' ')) ? (v.startsWith('http') ? v : 'https://' + v) : `https://www.google.com/search?q=${encodeURIComponent(v)}`;
        const t = tabs.find(x => x.id === now);
        t.url = u; t.title = u.split('/')[2] || u;
        document.getElementById(`f-${now}`).src = scram.encodeUrl(u);
        document.getElementById('home-ui').style.display = 'none';
        render();
    }

    function killTab(e, id) { e.stopPropagation(); if(tabs.length === 1) return; tabs = tabs.filter(t => t.id !== id); document.getElementById(`f-${id}`).remove(); if(now === id) switchTab(tabs[0].id); else render(); }
    function openSets() { document.getElementById('sets').classList.add('open'); }
    function closeSets() { document.getElementById('sets').classList.remove('open'); }
    function refresh() { showL(); document.getElementById(`f-${now}`).src = document.getElementById(`f-${now}`).src; }
    function back() { try { document.getElementById(`f-${now}`).contentWindow.history.back(); } catch(e){} }
    function next() { try { document.getElementById(`f-${now}`).contentWindow.history.forward(); } catch(e){} }
    function hideNav() { document.body.classList.add('nav-hidden'); closeSets(); }
    function progress(p) { const b = document.getElementById('l-bar'); b.style.width = p + '%'; if(p===100) setTimeout(()=>b.style.width='0',300); }
    function full() { if (!document.fullscreenElement) document.documentElement.requestFullscreen(); else document.exitFullscreen(); }
    
    function cloak() {
        const w = window.open('about:blank', '_blank');
        if (!w) return;
        const d = w.document;
        const f = d.createElement('iframe');
        d.title = 'Classes';
        f.style = 'position:fixed;top:0;left:0;width:100%;height:100%;border:none;';
        f.src = window.location.href;
        d.body.appendChild(f);
        window.location.replace('https://google.com'); 
    }

    window.onload = () => { makeTab(); setTimeout(hideL, 1000); };
    document.getElementById('bar').onkeydown = (e) => { if(e.key === 'Enter') go(); };
</script>
</body>
</html>
